<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="text">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/logo.png">
    <!-- Page Title -->
    <title>MyGarden</title>
    <!-- CSS Files -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="animation.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- other Files -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="commons.js"></script>
    <script type="text/javascript" src="user.js"></script>
    <script type="text/javascript" src="validate.js"></script>
    <script type="text/javascript" src="maps.js"></script>
    <style>
        .page-btn {
            text-decoration: none;
            padding: 6px 15px;
            color: white;
            background-color: #002431;
            border-radius: 20px;
    
        }
    </style>
</head>

<body class="sec" id="communitygarden" onload="eucledianDistance()">
    <!-- This is the header/ Nav Bar -->
    <header id="header">
        <div class = "wrapper">
            <a href="index.html" class="logo">Mok's Farmers</a>
        </div>

        <div class ="links">
            <div class = "wrapper">
                <a href="index.html">Home</a>
                <a href="MyGarden.html" class="active">MyGarden</a>
            </div>
            <div class = "wrapper">
                <a href="Events.html">Events</a>
                <a href="Buy.html">Buy</a>
            </div>
        </div>

        <div class = "user-info">
        <button class="button-5" role="button">
            <div v-if="isLogged" onclick="clearSession();window.location.replace('index.html')">Logout</div>
            <div v-else><a href="login.html">Login/Signup</a></div>
        </button>
        <div id = "welcome" style ="text-align: right;" v-if="isLogged" >
            Welcome, farmer 
        </div>
        </div>

    </header>
    <div v-if="isLogged">
        <div class="container ">
            <!-- Tab links -->
            <!-- <div class ='d-flex >
                <a href="MyGarden.html" aria-current="page" class="tabcontent active text-lg">MyGarden</a>
                <a href="CommunityGarden.html" class="tabcontent text-lg">CommunityGarden</a>
            </div>  -->
                    <div class = "container d-flex justify-between py-14">
                        <a href="MyGarden.html" aria-current="page" class="p-3 active text-lg">MyGarden</a>
                        <a href="CommunityGarden.html" class="page-btn tabcontent text-lg">CommunityGarden</a>
                    </div>  
                
               
           
            
        </div>

        <div v-if="myOwnPlants === '[]'">
            <h3>You have not posted anything yet!</h3>
        </div>
        <div v-else>
            <h3>My Own Plants:</h3>
            <div v-for="mine in myOwnPlants">
                <div class="glass relative">
                    <img class="cropPhoto" :src="mine.image" alt="Plant Image" style="display: inline-block; height: 100%; width: 30%;">
                    <div style="display: inline-block; width: 70%;">
                        <h3>{{ mine.post_name }}</h3>
                        <h3>{{ mine.description }}</h3>
                        <h3>Posted on: {{ mine.date }}</h3>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="nearbyPlants === '[]'">
            <h3>There are no nearby posts! Be the first in your area!</h3>
        </div>
        <div v-else>
            <h3>Nearby Plants</h3>
            <div v-for="near in nearbyPlants">
                <div class="glass relative">
                    <img class="cropPhoto" :src="near.image" alt="Plant Image" style="display: inline-block; height: 100%; width: 30%;">
                    <div style="display: inline-block; width: 70%;">
                        <h3>{{ near.post_name }}</h3>
                        <h3>{{ near.description }}</h3>
                        <h3>By: {{ near.user_name }}</h3>
                        <h3>Posted on: {{ near.date }}</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div v-else>
        <br><h3 class="buy-body">You are not logged in.</h3>
    </div>


    <script>
        window.onload = function() {
            if(!window.location.hash) {
                window.location = window.location + '#loaded';
                window.location.reload();
            }
        }
        const nearbyPlants = JSON.parse(localStorage.getItem("nearbyPlants"));
        console.log(JSON.parse(localStorage.getItem("nearbyPlants")));
        const myOwnPlants = JSON.parse(localStorage.getItem("myOwnPlants"));
        // display name if user is logged in
        if (userData!=null && Object.keys(userData).length>0){
            document.getElementById("welcome").innerHTML += userData.last_name + "!";
            }

        const app = Vue.createApp({ 
            data() { 
                return { 
                    isLogged: false,
                    nearbyPlants: nearbyPlants,
                    myOwnPlants: myOwnPlants
                      // key: value
                };
            }, // data
            // computed: { 
            //     derivedProperty() {
            //         return false;
            //     }  
            // }, // computed
            // created() { 
            // },
            // mounted() { 
            // },
            methods: {
                methodName() {
                    
                }
            },
            created() {
                if (userData!=null && Object.keys(userData).length>0){
                this.isLogged = true;
            }
            }
        });
        const vm = app.mount('#communitygarden'); 
    </script>

    
</body>
<!-- Always include javascript at the end of the file, just above the html tag -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

</html>